import{b1 as V,g as E,V as B,aZ as z,L as R,F as G,b2 as C,O as L,ad as W,z as O,af as X,u as q,M as H,aE as j,C as I,y as J,s as N,au as U,ag as D,A as Z}from"./three.module-b50c6fca.js";import{_ as K,r as T,o as Q,a as $,b as Y,c as tt,d as et}from"./index-965901d4.js";const h=new V,_=new E,P=new B,k=new B,M=new B;class it{constructor(t){this.geometry=t.geometry,this.randomFunction=Math.random,this.indexAttribute=this.geometry.index,this.positionAttribute=this.geometry.getAttribute("position"),this.normalAttribute=this.geometry.getAttribute("normal"),this.colorAttribute=this.geometry.getAttribute("color"),this.uvAttribute=this.geometry.getAttribute("uv"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(t){return this.weightAttribute=t?this.geometry.getAttribute(t):null,this}build(){const t=this.indexAttribute,e=this.positionAttribute,n=this.weightAttribute,r=t?t.count/3:e.count/3,u=new Float32Array(r);for(let c=0;c<r;c++){let s=1,o=3*c,a=3*c+1,f=3*c+2;t&&(o=t.getX(o),a=t.getX(a),f=t.getX(f)),n&&(s=n.getX(o)+n.getX(a)+n.getX(f)),h.a.fromBufferAttribute(e,o),h.b.fromBufferAttribute(e,a),h.c.fromBufferAttribute(e,f),s*=h.getArea(),u[c]=s}const i=new Float32Array(r);let l=0;for(let c=0;c<r;c++)l+=u[c],i[c]=l;return this.distribution=i,this}setRandomGenerator(t){return this.randomFunction=t,this}sample(t,e,n,r){const u=this.sampleFaceIndex();return this.sampleFace(u,t,e,n,r)}sampleFaceIndex(){const t=this.distribution[this.distribution.length-1];return this.binarySearch(this.randomFunction()*t)}binarySearch(t){const e=this.distribution;let n=0,r=e.length-1,u=-1;for(;n<=r;){const i=Math.ceil((n+r)/2);if(i===0||e[i-1]<=t&&e[i]>t){u=i;break}else t<e[i]?r=i-1:n=i+1}return u}sampleFace(t,e,n,r,u){let i=this.randomFunction(),l=this.randomFunction();i+l>1&&(i=1-i,l=1-l);const c=this.indexAttribute;let s=t*3,o=t*3+1,a=t*3+2;return c&&(s=c.getX(s),o=c.getX(o),a=c.getX(a)),h.a.fromBufferAttribute(this.positionAttribute,s),h.b.fromBufferAttribute(this.positionAttribute,o),h.c.fromBufferAttribute(this.positionAttribute,a),e.set(0,0,0).addScaledVector(h.a,i).addScaledVector(h.b,l).addScaledVector(h.c,1-(i+l)),n!==void 0&&(this.normalAttribute!==void 0?(h.a.fromBufferAttribute(this.normalAttribute,s),h.b.fromBufferAttribute(this.normalAttribute,o),h.c.fromBufferAttribute(this.normalAttribute,a),n.set(0,0,0).addScaledVector(h.a,i).addScaledVector(h.b,l).addScaledVector(h.c,1-(i+l)).normalize()):h.getNormal(n)),r!==void 0&&this.colorAttribute!==void 0&&(h.a.fromBufferAttribute(this.colorAttribute,s),h.b.fromBufferAttribute(this.colorAttribute,o),h.c.fromBufferAttribute(this.colorAttribute,a),_.set(0,0,0).addScaledVector(h.a,i).addScaledVector(h.b,l).addScaledVector(h.c,1-(i+l)),r.r=_.x,r.g=_.y,r.b=_.z),u!==void 0&&this.uvAttribute!==void 0&&(P.fromBufferAttribute(this.uvAttribute,s),k.fromBufferAttribute(this.uvAttribute,o),M.fromBufferAttribute(this.uvAttribute,a),u.set(0,0).addScaledVector(P,i).addScaledVector(k,l).addScaledVector(M,1-(i+l))),this}}class nt extends z{constructor(t,e={}){const n=e.font;if(n===void 0)super();else{const r=n.generateShapes(t,e.size);e.depth=e.height!==void 0?e.height:50,e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),super(r,e)}this.type="TextGeometry"}}class ot extends R{constructor(t){super(t)}load(t,e,n,r){const u=this,i=new G(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(t,function(l){const c=u.parse(JSON.parse(l));e&&e(c)},n,r)}parse(t){return new rt(t)}}class rt{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const n=[],r=st(t,e,this.data);for(let u=0,i=r.length;u<i;u++)n.push(...r[u].toShapes());return n}}function st(g,t,e){const n=Array.from(g),r=t/e.resolution,u=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*r,i=[];let l=0,c=0;for(let s=0;s<n.length;s++){const o=n[s];if(o===`
`)l=0,c-=u;else{const a=at(o,r,l,c,e);l+=a.offsetX,i.push(a.path)}}return i}function at(g,t,e,n,r){const u=r.glyphs[g]||r.glyphs["?"];if(!u){console.error('THREE.Font: character "'+g+'" does not exists in font family '+r.familyName+".");return}const i=new C;let l,c,s,o,a,f,p,m;if(u.o){const d=u._cachedOutline||(u._cachedOutline=u.o.split(" "));for(let b=0,x=d.length;b<x;)switch(d[b++]){case"m":l=d[b++]*t+e,c=d[b++]*t+n,i.moveTo(l,c);break;case"l":l=d[b++]*t+e,c=d[b++]*t+n,i.lineTo(l,c);break;case"q":s=d[b++]*t+e,o=d[b++]*t+n,a=d[b++]*t+e,f=d[b++]*t+n,i.quadraticCurveTo(a,f,s,o);break;case"b":s=d[b++]*t+e,o=d[b++]*t+n,a=d[b++]*t+e,f=d[b++]*t+n,p=d[b++]*t+e,m=d[b++]*t+n,i.bezierCurveTo(a,f,p,m,s,o);break}}return{offsetX:u.ha*t,path:i}}const ct=""+new URL("regular-7ed95f2f.json",import.meta.url).href;const ut={__name:"TextPoints",setup(g){let t=null;const e=T(null),n=T(null),r=()=>new W,u=s=>{const o=new O(45,s,1,1e3);return o.position.set(10,45,45),o.lookAt(0,0,0),o},i=(s,o,a)=>{const f=new X({canvas:s,antialias:!0});return f.setSize(o,a),f.setPixelRatio(window.devicePixelRatio),f},l=(s,o=1e4)=>{const a=new it(s).build(),f=new N,p=[];let m=new E;for(let d=0;d<o;d++)a.sample(m),p.push(m.x,m.y,m.z);return f.setAttribute("position",new U(p,3)),f},c=({font:s,size:o})=>{const a=new nt("Three.js",{font:s,size:o,height:4,curveSegments:10,bevelEnabled:!0,bevelThickness:.5,bevelSize:.2,bevelSegments:5});a.computeBoundingBox();const f=new q(a,new H({color:16777215})),p=`
    void main() {
      vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
      gl_PointSize = 0.5 * (600.0 / -mvPosition.z);
      gl_Position = projectionMatrix * mvPosition;
    }
  `,m=`
    uniform vec3 u_color;

    float circle(vec2 coord, float radius) {
      float distance = length(coord - vec2(0.5));
      return 1.0 - smoothstep(radius, radius + 0.01, distance);
    }

    void main() {
      float opacity = circle(gl_PointCoord, 0.5);
      if (opacity < 0.5) discard;
      gl_FragColor = vec4(u_color, 1.0);
    }
  `,d=new j({uniforms:{u_color:{value:new I("#0074E4")}},vertexShader:p,fragmentShader:m,transparent:!0}),b=l(f,6e3),x=new J(b,d),y=a.boundingBox,A=-.5*(y.max.x-y.min.x);return x.position.set(A,0,0),x};return Q(()=>{const s=e.value,o=n.value,a=o.clientWidth,f=o.clientHeight,p=r(),m=u(a/f),d=i(s,a,f);new ot().load(ct,A=>{const v=c({font:A,size:a*.01});p.add(v)});const x=new D,y=()=>{const A=x.getElapsedTime(),v=Z.degToRad(A*18%360),w=Math.sin(v)*30,S=Math.cos(v)*30;m.position.x=w,m.position.z=S,m.lookAt(p.position),d.render(p,m),t=window.requestAnimationFrame(y)};y(),$(()=>{d.dispose(),d.forceContextLoss(),p.traverse(A=>{if(A instanceof L){const{geometry:v,material:w}=A;v&&v.dispose();const S=Array.isArray(w)?w:[w];for(const F of S)F&&F.dispose()}}),window.cancelAnimationFrame(t)})}),(s,o)=>(Y(),tt("div",{ref_key:"containerElementRef",ref:n,class:"container"},[et("canvas",{ref_key:"canvasElementRef",ref:e},null,512)],512))}},ht=K(ut,[["__scopeId","data-v-b15ea7d7"]]);export{ht as default};
