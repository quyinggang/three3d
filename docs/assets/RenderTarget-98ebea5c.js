import{aG as G,O as L,u as v,ah as x,M as R,ad as O,C as P,z as W,af as S,ag as z}from"./three.module-b50c6fca.js";import{O as F}from"./OrbitControls-a97fbd6e.js";import{_ as q,r as h,o as D,a as H,b as I,c as N,d as U}from"./index-965901d4.js";const V={__name:"RenderTarget",setup(X){let d=null;const m=h(null),u=h(null),y=e=>{const n=new v(new x(1,1,1),new R({color:"#8A2BE2"})),t=new v(new x(1,1,1),new R({color:"#808080",map:e.texture}));return[n,t]},b=()=>{const e=new O;return e.background=new P(12575709),e},E=e=>{const n=new W(45,e,1,1e3);return n.position.set(1,1,3),n.lookAt(0,0,0),n},M=(e,n,t)=>{const r=new S({canvas:e,antialias:!0});return r.setSize(n,t),r.setPixelRatio(window.devicePixelRatio),r},B=(e,n)=>{const t=new F(e,n);return t.enableZoom=!1,t};return D(()=>{const e=m.value,n=u.value,t=n.clientWidth,r=n.clientHeight,f=window.devicePixelRatio,a=b(),s=E(t/r),o=M(e,t,r),T=B(s,o.domElement),_=new G(t*f,r*f),[l,k]=y(_);l.layers.set(1),a.add(l),a.add(k);const C=new z,p=()=>{const c=C.getElapsedTime();T.update(),s.layers.set(1),l.rotateX(Math.sin(c)*.025),l.rotateY(Math.cos(c)*.025),o.setRenderTarget(_),o.render(a,s),s.layers.set(0),o.setRenderTarget(null),o.render(a,s),d=window.requestAnimationFrame(p)};p(),H(()=>{o.dispose(),o.forceContextLoss(),a.traverse(c=>{if(c instanceof L){const{geometry:w,material:i}=c;w&&w.dispose();const A=Array.isArray(i)?i:[i];for(const g of A)g&&g.dispose()}}),window.cancelAnimationFrame(d)})}),(e,n)=>(I(),N("div",{ref_key:"containerElementRef",ref:u,class:"container"},[U("canvas",{ref_key:"canvasElementRef",ref:m},null,512)],512))}},J=q(V,[["__scopeId","data-v-c8cc4905"]]);export{J as default};
