import{g as e,b9 as X,s as H,y as M,aE as N,C as x,O as P,au as O,h as J,aJ as L,G as Z,ad as W,z as q,af as _,ag as $}from"./three.module-b50c6fca.js";import{G as ee}from"./dat.gui.module-5ea4ba08.js";import{O as te}from"./OrbitControls-a97fbd6e.js";import{s as k}from"./spark-5a5bb6aa.js";import{_ as ie,r as G,o as ae,a as se,b as oe,c as re,d as ne}from"./index-965901d4.js";const le=`
  attribute vec3  customColor;
  attribute float customOpacity;
  attribute float customSize;
  attribute float customAngle;
  attribute float customVisible;

  varying vec4 vColor;
  varying float vAngle;
  
  void main() {
    if ( customVisible > 0.5 ) {
      vColor = vec4( customColor, customOpacity );
    } else {
      vColor = vec4(0.0, 0.0, 0.0, 0.0);
    }
    vAngle = customAngle;

    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_PointSize = customSize * ( 300.0 / length( mvPosition.xyz ) );
    gl_Position = projectionMatrix * mvPosition;
  }
`,ce=`
  uniform sampler2D customTexture;

  varying vec4 vColor;
  varying float vAngle;

  void main() {
    float cosValue = cos(vAngle);
    float sinValue = sin(vAngle);
    vec2 coord = gl_PointCoord.xy - vec2(0.5);
    vec2 rotatedUV = vec2(cosValue * coord.x + sinValue * coord.y + 0.5, cosValue * coord.y - sinValue * coord.x + 0.5);
    gl_FragColor = vColor * texture2D(customTexture, rotatedUV);
  }
`;function A(w,t){this.times=w||[],this.values=t||[]}A.prototype.lerp=function(w){let t=0,o=this.times.length;for(;t<o&&w>this.times[t];)t++;if(t==0)return this.values[0];if(t==o)return this.values[o-1];let r=(w-this.times[t-1])/(this.times[t]-this.times[t-1]);return this.values[0]instanceof e?this.values[t-1].clone().lerp(this.values[t],r):this.values[t-1]+r*(this.values[t]-this.values[t-1])};class z{constructor(){this.position=new e,this.velocity=new e,this.acceleration=new e,this.angle=0,this.angleVelocity=0,this.angleAcceleration=0,this.size=16,this.color=new x,this.opacity=1,this.age=0,this.alive=0}update(t){if(this.position.add(this.velocity.clone().multiplyScalar(t)),this.velocity.add(this.acceleration.clone().multiplyScalar(t)),this.angle+=this.angleVelocity*.01745329251*t,this.angleVelocity+=this.angleAcceleration*.01745329251*t,this.age+=t,this.sizeTween.times.length>0&&(this.size=this.sizeTween.lerp(this.age)),this.colorTween.times.length>0){let o=this.colorTween.lerp(this.age);this.color=new x().setHSL(o.x,o.y,o.z)}this.opacityTween.times.length>0&&(this.opacity=this.opacityTween.lerp(this.age))}}const l=Object.freeze({CUBE:1,SPHERE:2}),f=(w,t)=>w+t*(Math.random()-.5),T=(w,t)=>{let o=new e(Math.random()-.5,Math.random()-.5,Math.random()-.5);return new e().addVectors(w,new e().multiplyVectors(t,o))};class Ae{constructor(){this.positionStyle=l.CUBE,this.positionBase=new e,this.positionSpread=new e,this.positionRadius=0,this.velocityStyle=l.CUBE,this.velocityBase=new e,this.velocitySpread=new e,this.speedBase=0,this.speedSpread=0,this.accelerationBase=new e,this.accelerationSpread=new e,this.angleBase=0,this.angleSpread=0,this.angleVelocityBase=0,this.angleVelocitySpread=0,this.angleAccelerationBase=0,this.angleAccelerationSpread=0,this.sizeBase=0,this.sizeSpread=0,this.sizeTween=new A,this.colorBase=new e(0,1,.5),this.colorSpread=new e(0,0,0),this.colorTween=new A,this.opacityBase=1,this.opacitySpread=0,this.opacityTween=new A,this.blendStyle=X,this.particleArray=[],this.particlesPerSecond=100,this.particleDeathAge=1,this.emitterAge=0,this.emitterAlive=!0,this.emitterDeathAge=60,this.particleCount=this.particlesPerSecond*Math.min(this.particleDeathAge,this.emitterDeathAge),this.customBufferAttributes=Object.freeze({customVisible:{array:[],size:1},customAngle:{array:[],size:1},customSize:{array:[],size:1},customColor:{array:[],size:3},customOpacity:{array:[],size:1}}),this.particleGeometry=new H,this.particleMesh=new M,this.particleTexture=null,this.particleMaterial=null}setValues(t){if(!t)throw new Error("setValues method need parameters");this.sizeTween=new A,this.colorTween=new A,this.opacityTween=new A;for(let o in t)this[o]=t[o];z.prototype.sizeTween=this.sizeTween,z.prototype.colorTween=this.colorTween,z.prototype.opacityTween=this.opacityTween,this.particleArray=[],this.emitterAge=0,this.emitterAlive=!0,this.particleCount=this.particlesPerSecond*Math.min(this.particleDeathAge,this.emitterDeathAge),this.particleMaterial=new N({uniforms:{customTexture:{value:this.particleTexture}},vertexShader:le,fragmentShader:ce,transparent:!0,blending:X,depthTest:!1,depthWrite:!1})}createParticle(){const{positionStyle:t,velocityStyle:o}=this,r=new z;if(t==l.CUBE&&(r.position=T(this.positionBase,this.positionSpread)),t==l.SPHERE){let c=2*Math.random()-1,p=6.2832*Math.random(),m=Math.sqrt(1-c*c),d=new e(m*Math.cos(p),m*Math.sin(p),c);r.position=new e().addVectors(this.positionBase,d.multiplyScalar(this.positionRadius))}if(o==l.CUBE)r.velocity=T(this.velocityBase,this.velocitySpread);else if(o==l.SPHERE){let c=new e().subVectors(r.position,this.positionBase),p=f(this.speedBase,this.speedSpread);r.velocity=c.normalize().multiplyScalar(p)}r.acceleration=T(this.accelerationBase,this.accelerationSpread),r.angle=f(this.angleBase,this.angleSpread),r.angleVelocity=f(this.angleVelocityBase,this.angleVelocitySpread),r.angleAcceleration=f(this.angleAccelerationBase,this.angleAccelerationSpread),r.size=f(this.sizeBase,this.sizeSpread);const n=T(this.colorBase,this.colorSpread);return r.color=new x().setHSL(n.x,n.y,n.z),r.opacity=f(this.opacityBase,this.opacitySpread),r.age=0,r.alive=0,r}initialize(t){const{particleCount:o,particleArray:r,particleGeometry:n,particleMaterial:c,blendStyle:p,customBufferAttributes:m}=this;if(!c||!n||!o)throw new Error("please call setValues before initialize");if(!(t instanceof P))throw new Error("parameter must be Object3D");const d=[],{customVisible:C,customColor:U,customOpacity:v,customSize:g,customAngle:h}=m;for(let a=0;a<o;a++){const i=this.createParticle(),{position:s,color:u,opacity:y,size:S,angle:B,alive:D}=i;d.push(s.x,s.y,s.z),U.array.push(u.r,u.g,u.b),C.array.push(D),v.array.push(y),g.array.push(S),h.array.push(B),r.push(i)}n.setAttribute("position",new O(d,3));for(const[a,i]of Object.entries(m))n.setAttribute(a,new O(i.array,i.size));c.blending=p,p!=X&&(c.depthTest=!1),this.particleMesh=new M(n,c),t.add(this.particleMesh)}update(t){const o=[],{particleArray:r,particleGeometry:n,particleCount:c,particleDeathAge:p}=this,{customVisible:m,customColor:d,customOpacity:C,customSize:U,customAngle:v,position:g}=n.attributes;for(let h=0;h<c;h++){const a=r[h];if(a.alive){a.update(t),a.age>p&&(a.alive=0,o.push(h));const{alive:i,color:s,opacity:u,size:y,angle:S,position:B}=a;g.setXYZ(h,B.x,B.y,B.z),d.setXYZ(h,s.r,s.g,s.b),m.setX(h,i),C.setX(h,u),U.setX(h,y),v.setX(h,S)}}if(n.attributes.position.needsUpdate=!0,n.attributes.customVisible.needsUpdate=!0,n.attributes.customColor.needsUpdate=!0,n.attributes.customOpacity.needsUpdate=!0,n.attributes.customSize.needsUpdate=!0,n.attributes.customAngle.needsUpdate=!0,!!this.emitterAlive){if(this.emitterAge<p){let h=Math.round(this.particlesPerSecond*(this.emitterAge+0)),a=Math.round(this.particlesPerSecond*(this.emitterAge+t));a>this.particleCount&&(a=this.particleCount);for(let i=h;i<a;i++)this.particleArray[i].alive=1}o.forEach(h=>{this.particleArray[h]=this.createParticle(),this.particleArray[h].alive=1;const{x:a,y:i,z:s}=this.particleArray[h].position;g.setXYZ(h,a,i,s)}),o.length>0&&(n.attributes.position.needsUpdate=!0),this.emitterAge+=t,this.emitterAge>this.emitterDeathAge&&(this.emitterAlive=!1)}}destroy(t){t instanceof P&&(this.particleMesh&&t.remove(this.particleMesh),this.particleMesh=null)}}const pe="data:image/png;base64,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",b=""+new URL("smokeparticle-e68a4ec5.png",import.meta.url).href,he="data:image/png;base64,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",de="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAIwSURBVFhHvdcxb9QwFAfwcNejNyCBmKALSAwIVhYEX4KBoV8AiQkkVDEhMXRHMCAk1m58AEYGJDqwFIHUAdpeoXcDgYq21ziO7di8V/5XpLap7TR3Pym65ySO/ew4ySV1pNtyThTmszal443jdEc+xuHxWe6LC0KqvnPO0naQzZUZLK3tXMTpzbr//H1XKj3khv61dyQrC509WFjpolpzaJgXLUFDlegMK6ReRLVm/EiHs8cnfpB1/U1xF9VPjrIfxDTPMmnWUf1k1tP8Rlz2/31a/XUdl6nUwm+l82fad5xLHIrBuANXZs7NoljJ24HOVPvmKYJiMK7Tabduo1jJ24FW4q4ijEaDcA1hJW9mypSWMokeAaaMTaY77WPrei/Mc4mwFt/0eaeAsjAIo4XU9XaA8l9DWMcqfit5O0BP3491Z4GeHl8QVvJ2YEvotzVW4Z5Mlu8QVgq6cl5o1z09hVIYWjz8DPFe3zsCTCozjzAIrxx6f7xGsRmUEV83CH8lzb/pTaNqM34Pi4f8sg9gt3aLF6jWLFHoFI1UKnQZtWSC7oGRzaG5RzOM0tHozp9DOB670iwj2UPoU0zgtGBRI8A2fm4/QniIKZPxZj9Cn1s9JL1P6VLhcJToEWBS26cI92VCPkE4GXy3j/C6x+5otUaASVU+Q/suy9Ur7J6cXiou7f1PoW3p+/Aydk9WXpiUlt5XFGupPQWMXg8LqnQvUZy8b4M/tz6sZGdRrCFJ/gJ/iJvMjudy4QAAAABJRU5ErkJggg==";const ue={__name:"ParticleEffect",setup(w){let t=null;const o=G(null),r=G(null);let n=null;const c=new J,p={starfield:{positionStyle:l.CUBE,positionBase:new e(0,200,0),positionSpread:new e(600,400,600),velocityStyle:l.CUBE,velocityBase:new e(0,0,0),velocitySpread:new e(.5,.5,.5),angleBase:0,angleSpread:720,angleVelocityBase:0,angleVelocitySpread:4,particleTexture:c.load(pe),sizeBase:10,sizeSpread:2,colorBase:new e(.15,1,.9),colorSpread:new e(0,0,.2),opacityBase:1,particlesPerSecond:2e4,particleDeathAge:60,emitterDeathAge:.1},fireball:{positionStyle:l.SPHERE,positionBase:new e(0,50,0),positionRadius:2,velocityStyle:l.SPHERE,speedBase:40,speedSpread:8,particleTexture:c.load(b),sizeTween:new A([0,.1],[1,150]),opacityTween:new A([.7,1],[1,0]),colorBase:new e(.02,1,.4),blendStyle:L,particlesPerSecond:60,particleDeathAge:1.5,emitterDeathAge:60},smoke:{positionStyle:l.CUBE,positionBase:new e(0,0,0),positionSpread:new e(10,0,10),velocityStyle:l.CUBE,velocityBase:new e(0,150,0),velocitySpread:new e(80,50,80),accelerationBase:new e(0,-10,0),particleTexture:c.load(b),angleBase:0,angleSpread:720,angleVelocityBase:0,angleVelocitySpread:720,sizeTween:new A([0,1],[32,128]),opacityTween:new A([.8,2],[.5,0]),colorTween:new A([.4,1],[new e(0,0,.2),new e(0,0,.5)]),particlesPerSecond:200,particleDeathAge:2,emitterDeathAge:60},clouds:{positionStyle:l.CUBE,positionBase:new e(-100,100,0),positionSpread:new e(0,50,60),velocityStyle:l.CUBE,velocityBase:new e(40,0,0),velocitySpread:new e(20,0,0),particleTexture:c.load(b),sizeBase:80,sizeSpread:100,colorBase:new e(0,0,1),opacityTween:new A([0,1,4,5],[0,1,1,0]),particlesPerSecond:50,particleDeathAge:10,emitterDeathAge:60},snow:{positionStyle:l.CUBE,positionBase:new e(0,200,0),positionSpread:new e(500,0,500),velocityStyle:l.CUBE,velocityBase:new e(0,-60,0),velocitySpread:new e(50,20,50),accelerationBase:new e(0,-10,0),angleBase:0,angleSpread:720,angleVelocityBase:0,angleVelocitySpread:60,particleTexture:c.load(he),sizeTween:new A([0,.25],[1,10]),colorBase:new e(.66,1,.9),opacityTween:new A([2,3],[.8,0]),particlesPerSecond:200,particleDeathAge:4,emitterDeathAge:60},rain:{positionStyle:l.CUBE,positionBase:new e(0,200,0),positionSpread:new e(600,0,600),velocityStyle:l.CUBE,velocityBase:new e(0,-400,0),velocitySpread:new e(10,50,10),accelerationBase:new e(0,-10,0),particleTexture:c.load(de),sizeBase:8,sizeSpread:4,colorBase:new e(.66,1,.7),colorSpread:new e(0,0,.2),opacityBase:.6,particlesPerSecond:1e3,particleDeathAge:1,emitterDeathAge:60},fireflies:{positionStyle:l.CUBE,positionBase:new e(0,100,0),positionSpread:new e(400,200,400),velocityStyle:l.CUBE,velocityBase:new e(0,0,0),velocitySpread:new e(60,20,60),particleTexture:c.load(k),sizeBase:40,sizeSpread:6,opacityTween:new A([0,1,1.1,2,2.1,3,3.1,4,4.1,5,5.1,6,6.1],[.2,.2,1,1,.2,.2,1,1,.2,.2,1,1,.2]),colorBase:new e(.3,1,.6),colorSpread:new e(.3,0,0),particlesPerSecond:20,particleDeathAge:6.1,emitterDeathAge:600},firework:{positionStyle:l.SPHERE,positionBase:new e(0,100,0),positionRadius:10,velocityStyle:l.SPHERE,speedBase:90,speedSpread:10,accelerationBase:new e(0,-80,0),particleTexture:c.load(k),sizeTween:new A([.5,.7,1.3],[5,40,1]),opacityTween:new A([.2,.7,2.5],[.75,1,0]),colorTween:new A([.4,.8,1],[new e(0,1,1),new e(0,1,.6),new e(.8,1,.6)]),blendStyle:L,particlesPerSecond:3e3,particleDeathAge:2.5,emitterDeathAge:.2},candle:{positionStyle:l.SPHERE,positionBase:new e(0,50,0),positionRadius:2,velocityStyle:l.CUBE,velocityBase:new e(0,100,0),velocitySpread:new e(20,0,20),particleTexture:c.load(b),sizeTween:new A([0,.3,1.2],[20,150,1]),opacityTween:new A([.9,1.5],[1,0]),colorTween:new A([.5,1],[new e(.02,1,.5),new e(.05,1,0)]),blendStyle:L,particlesPerSecond:60,particleDeathAge:1.5,emitterDeathAge:60}},m=(a,i)=>{n=new Ae,n.setValues(a),n.initialize(i)},d=(a,i)=>{n&&n.destroy(i),m(a,i)},C=a=>{const i=new ee;i.width=100;const s={starfield:()=>d(p.starfield,a),fireflies:()=>d(p.fireflies,a),clouds:()=>d(p.clouds,a),smoke:()=>d(p.smoke,a),fireball:()=>d(p.fireball,a),candle:()=>d(p.candle,a),rain:()=>d(p.rain,a),snow:()=>d(p.snow,a),firework:()=>d(p.firework,a)};return i.add(s,"starfield").name("繁星"),i.add(s,"fireflies").name("萤火虫"),i.add(s,"clouds").name("云朵"),i.add(s,"smoke").name("烟雾"),i.add(s,"fireball").name("火球"),i.add(s,"candle").name("火焰"),i.add(s,"rain").name("下雨"),i.add(s,"snow").name("下雪"),i.add(s,"firework").name("烟花"),i.open(),()=>i.destroy()},U=()=>new W,v=a=>{const i=new q(45,a,.1,1e4);return i.position.set(0,200,400),i.lookAt(0,0,0),i},g=(a,i,s)=>{const u=new _({canvas:a,antialias:!0});return u.setSize(i,s),u.setPixelRatio(window.devicePixelRatio),u},h=(a,i)=>{const s=new te(a,i);return s.minPolarAngle=Math.PI/4,s.maxPolarAngle=Math.PI/2*.96,s};return ae(()=>{const a=o.value,i=r.value,s=i.clientWidth,u=i.clientHeight,y=U(),S=v(s/u),B=g(a,s,u),D=h(S,B.domElement),j=new $,F=()=>{const E=j.getDelta();D.update(),n&&n.update(E*.5),B.render(y,S),t=window.requestAnimationFrame(F)},V=new Z;y.add(V);const I=C(V);m(p.fireflies,V),F(),se(()=>{I(),B.dispose(),B.forceContextLoss(),y.traverse(E=>{if(E instanceof P){const{geometry:R,material:Q}=E;R&&R.dispose();const K=Array.isArray(Q)?Q:[Q];for(const Y of K)Y&&Y.dispose()}}),window.cancelAnimationFrame(t)})}),(a,i)=>(oe(),re("div",{ref_key:"containerElementRef",ref:r,class:"container"},[ne("canvas",{ref_key:"canvasElementRef",ref:o},null,512)],512))}},Se=ie(ue,[["__scopeId","data-v-09fec444"]]);export{Se as default};
