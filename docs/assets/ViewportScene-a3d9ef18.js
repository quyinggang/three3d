import{O as G,ah as L,u as y,M as v,ad as P,z as W,af as F,C as b}from"./three.module-8787a522.js";import{O as C}from"./OrbitControls-8109a5ff.js";import{g as S}from"./util-760d6c6b.js";import{_ as q,r as E,o as D,a as H,b as I,c as N,d as T}from"./index-1a0b05a6.js";const U={__name:"ViewportScene",setup(j){let l=null;const d=E(null),m=E(null),R=()=>{const t=new L(1,1,1),e=new y(t,new v({color:S()}));e.position.set(-1,0,0);const s=new y(t,new v({color:S()}));return s.position.set(1,0,0),[e,s]},k=()=>new P,f=t=>{const e=new W(45,t,1,1e3);return e.position.set(1,1,6),e.lookAt(0,0,0),e},B=(t,e,s)=>{const r=new F({canvas:t,antialias:!0});return r.setSize(e,s),r.setPixelRatio(window.devicePixelRatio),r.setScissorTest(!0),r};return D(()=>{const t=d.value,e=m.value,s=e.clientWidth,r=e.clientHeight,n={x:0,y:0,width:s/2,height:r},o={x:s/2,y:0,width:s/2,height:r},c=k(),h=f(n.width/n.height),w=f(o.width/o.height),a=B(t,s,r),[M,V]=R();c.add(M),c.add(V);const p=a.domElement,A=new C(h,p),z=new C(w,p),u=()=>{A.update(),z.update(),c.background=new b("#a9a9a9"),a.setScissor(n.x,n.y,n.width,n.height/2),a.setViewport(n.x,n.y,n.width,n.height),a.render(c,h),c.background=new b("#00bfff"),a.setScissor(o.x,o.y+r/2,o.width,o.height),a.setViewport(o.x,o.y,o.width,o.height),a.render(c,w),l=window.requestAnimationFrame(u)};u(),H(()=>{a.dispose(),a.forceContextLoss(),c.traverse(_=>{if(_ instanceof G){const{geometry:g,material:i}=_;g&&g.dispose();const O=Array.isArray(i)?i:[i];for(const x of O)x&&x.dispose()}}),window.cancelAnimationFrame(l)})}),(t,e)=>(I(),N("div",{ref_key:"containerElementRef",ref:m,class:"container"},[T("canvas",{ref_key:"canvasElementRef",ref:d},null,512)],512))}},Y=q(U,[["__scopeId","data-v-473f5f2f"]]);export{Y as default};
