import{O as An,ad as bn,z as nt,af as tt,F as et,ai as it,V as rt,G as ot,g as In,aY as ut,u as lt,aZ as ft,M as at,w as ct,s as st,o as pt,C as Ln}from"./three.module-8f39f104.js";import{O as vt}from"./OrbitControls-8206acf3.js";import{t as ht}from"./util-c747da73.js";import{_ as gt,r as Fn,o as St,a as Et,b as dt,c as wt,d as Un,p as yt,e as Mt}from"./index-dafdd258.js";class mt{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const a=i[r],c=t+a,v=Math.abs(t)<Math.abs(a)?t-(c-a):a-(c-t);v&&(i[e++]=v),t=c}return i[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let i=this._n,e,r,a,c=0;if(i>0){for(c=t[--i];i>0&&(e=c,r=t[--i],c=e+r,a=r-(c-e),!a););i>0&&(a<0&&t[i-1]<0||a>0&&t[i-1]>0)&&(r=a*2,e=c+r,r==e-c&&(c=e))}return c}}function*_t(n){for(const t of n)yield*t}function Yn(n){return Array.from(_t(n))}var D=1e-6,Pt=1e-12,F=Math.PI,V=F/2,Cn=F/4,J=F*2,$=180/F,q=F/180,T=Math.abs,Xn=Math.atan,nn=Math.atan2,B=Math.cos,Rt=Math.exp,At=Math.log,G=Math.sin,It=Math.sign||function(n){return n>0?1:n<0?-1:0},hn=Math.sqrt,Lt=Math.tan;function Ft(n){return n>1?0:n<-1?F:Math.acos(n)}function tn(n){return n>1?V:n<-1?-V:Math.asin(n)}function j(){}function cn(n,t){n&&Dn.hasOwnProperty(n.type)&&Dn[n.type](n,t)}var Nn={Feature:function(n,t){cn(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,e=-1,r=i.length;++e<r;)cn(i[e].geometry,t)}},Dn={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)n=i[e],t.point(n[0],n[1],n[2])},LineString:function(n,t){En(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)En(i[e],t,0)},Polygon:function(n,t){zn(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)zn(i[e],t)},GeometryCollection:function(n,t){for(var i=n.geometries,e=-1,r=i.length;++e<r;)cn(i[e],t)}};function En(n,t,i){var e=-1,r=n.length-i,a;for(t.lineStart();++e<r;)a=n[e],t.point(a[0],a[1],a[2]);t.lineEnd()}function zn(n,t){var i=-1,e=n.length;for(t.polygonStart();++i<e;)En(n[i],t,1);t.polygonEnd()}function Ct(n,t){n&&Nn.hasOwnProperty(n.type)?Nn[n.type](n,t):cn(n,t)}function dn(n){return[nn(n[1],n[0]),tn(n[2])]}function K(n){var t=n[0],i=n[1],e=B(i);return[e*B(t),e*G(t),G(i)]}function on(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function sn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function gn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function un(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function wn(n){var t=hn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function yn(n,t){function i(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(i.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),i}function Mn(n,t){return T(n)>F&&(n-=Math.round(n/J)*J),[n,t]}Mn.invert=Mn;function Zn(n,t,i){return(n%=J)?t||i?yn(Bn(n),Gn(t,i)):Bn(n):t||i?Gn(t,i):Mn}function Tn(n){return function(t,i){return t+=n,T(t)>F&&(t-=Math.round(t/J)*J),[t,i]}}function Bn(n){var t=Tn(n);return t.invert=Tn(-n),t}function Gn(n,t){var i=B(n),e=G(n),r=B(t),a=G(t);function c(v,S){var h=B(S),u=B(v)*h,o=G(v)*h,l=G(S),f=l*i+u*e;return[nn(o*r-f*a,u*i-l*e),tn(f*r+o*a)]}return c.invert=function(v,S){var h=B(S),u=B(v)*h,o=G(v)*h,l=G(S),f=l*r-o*a;return[nn(o*r+l*a,u*i+f*e),tn(f*i-u*e)]},c}function Nt(n){n=Zn(n[0]*q,n[1]*q,n.length>2?n[2]*q:0);function t(i){return i=n(i[0]*q,i[1]*q),i[0]*=$,i[1]*=$,i}return t.invert=function(i){return i=n.invert(i[0]*q,i[1]*q),i[0]*=$,i[1]*=$,i},t}function Dt(n,t,i,e,r,a){if(i){var c=B(t),v=G(t),S=e*i;r==null?(r=t+e*J,a=t-S/2):(r=qn(c,r),a=qn(c,a),(e>0?r<a:r>a)&&(r+=e*J));for(var h,u=r;e>0?u>a:u<a;u-=S)h=dn([c,-v*B(u),-v*G(u)]),n.point(h[0],h[1])}}function qn(n,t){t=K(t),t[0]-=n,wn(t);var i=Ft(-t[1]);return((-t[2]<0?-i:i)+J-D)%J}function Kn(){var n=[],t;return{point:function(i,e,r){t.push([i,e,r])},lineStart:function(){n.push(t=[])},lineEnd:j,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var i=n;return n=[],t=null,i}}}function an(n,t){return T(n[0]-t[0])<D&&T(n[1]-t[1])<D}function ln(n,t,i,e){this.x=n,this.z=t,this.o=i,this.e=e,this.v=!1,this.n=this.p=null}function Qn(n,t,i,e,r){var a=[],c=[],v,S;if(n.forEach(function(p){if(!((w=p.length-1)<=0)){var w,g=p[0],m=p[w],E;if(an(g,m)){if(!g[2]&&!m[2]){for(r.lineStart(),v=0;v<w;++v)r.point((g=p[v])[0],g[1]);r.lineEnd();return}m[0]+=2*D}a.push(E=new ln(g,p,null,!0)),c.push(E.o=new ln(g,null,E,!1)),a.push(E=new ln(m,p,null,!1)),c.push(E.o=new ln(m,null,E,!0))}}),!!a.length){for(c.sort(t),On(a),On(c),v=0,S=c.length;v<S;++v)c[v].e=i=!i;for(var h=a[0],u,o;;){for(var l=h,f=!0;l.v;)if((l=l.n)===h)return;u=l.z,r.lineStart();do{if(l.v=l.o.v=!0,l.e){if(f)for(v=0,S=u.length;v<S;++v)r.point((o=u[v])[0],o[1]);else e(l.x,l.n.x,1,r);l=l.n}else{if(f)for(u=l.p.z,v=u.length-1;v>=0;--v)r.point((o=u[v])[0],o[1]);else e(l.x,l.p.x,-1,r);l=l.p}l=l.o,u=l.z,f=!f}while(!l.v);r.lineEnd()}}}function On(n){if(t=n.length){for(var t,i=0,e=n[0],r;++i<t;)e.n=r=n[i],r.p=e,e=r;e.n=r=n[0],r.p=e}}function Sn(n){return T(n[0])<=F?n[0]:It(n[0])*((T(n[0])+F)%J-F)}function zt(n,t){var i=Sn(t),e=t[1],r=G(e),a=[G(i),-B(i),0],c=0,v=0,S=new mt;r===1?e=V+D:r===-1&&(e=-V-D);for(var h=0,u=n.length;h<u;++h)if(l=(o=n[h]).length)for(var o,l,f=o[l-1],p=Sn(f),w=f[1]/2+Cn,g=G(w),m=B(w),E=0;E<l;++E,p=d,g=R,m=I,f=M){var M=o[E],d=Sn(M),A=M[1]/2+Cn,R=G(A),I=B(A),_=d-p,P=_>=0?1:-1,C=P*_,y=C>F,W=g*R;if(S.add(nn(W*P*G(C),m*I+W*B(C))),c+=y?_+P*J:_,y^p>=i^d>=i){var z=sn(K(f),K(M));wn(z);var N=sn(a,z);wn(N);var s=(y^_>=0?-1:1)*tn(N[2]);(e>s||e===s&&(z[0]||z[1]))&&(v+=y^_>=0?1:-1)}}return(c<-D||c<D&&S<-Pt)^v&1}function kn(n,t,i,e){return function(r){var a=t(r),c=Kn(),v=t(c),S=!1,h,u,o,l={point:f,lineStart:w,lineEnd:g,polygonStart:function(){l.point=m,l.lineStart=E,l.lineEnd=M,u=[],h=[]},polygonEnd:function(){l.point=f,l.lineStart=w,l.lineEnd=g,u=Yn(u);var d=zt(h,e);u.length?(S||(r.polygonStart(),S=!0),Qn(u,Bt,d,i,r)):d&&(S||(r.polygonStart(),S=!0),r.lineStart(),i(null,null,1,r),r.lineEnd()),S&&(r.polygonEnd(),S=!1),u=h=null},sphere:function(){r.polygonStart(),r.lineStart(),i(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function f(d,A){n(d,A)&&r.point(d,A)}function p(d,A){a.point(d,A)}function w(){l.point=p,a.lineStart()}function g(){l.point=f,a.lineEnd()}function m(d,A){o.push([d,A]),v.point(d,A)}function E(){v.lineStart(),o=[]}function M(){m(o[0][0],o[0][1]),v.lineEnd();var d=v.clean(),A=c.result(),R,I=A.length,_,P,C;if(o.pop(),h.push(o),o=null,!!I){if(d&1){if(P=A[0],(_=P.length-1)>0){for(S||(r.polygonStart(),S=!0),r.lineStart(),R=0;R<_;++R)r.point((C=P[R])[0],C[1]);r.lineEnd()}return}I>1&&d&2&&A.push(A.pop().concat(A.shift())),u.push(A.filter(Tt))}}return l}}function Tt(n){return n.length>1}function Bt(n,t){return((n=n.x)[0]<0?n[1]-V-D:V-n[1])-((t=t.x)[0]<0?t[1]-V-D:V-t[1])}const Wn=kn(function(){return!0},Gt,Ot,[-F,-V]);function Gt(n){var t=NaN,i=NaN,e=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(a,c){var v=a>0?F:-F,S=T(a-t);T(S-F)<D?(n.point(t,i=(i+c)/2>0?V:-V),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(v,i),n.point(a,i),r=0):e!==v&&S>=F&&(T(t-e)<D&&(t-=e*D),T(a-v)<D&&(a-=v*D),i=qt(t,i,a,c),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(v,i),r=0),n.point(t=a,i=c),e=v},lineEnd:function(){n.lineEnd(),t=i=NaN},clean:function(){return 2-r}}}function qt(n,t,i,e){var r,a,c=G(n-i);return T(c)>D?Xn((G(t)*(a=B(e))*G(i)-G(e)*(r=B(t))*G(n))/(r*a*c)):(t+e)/2}function Ot(n,t,i,e){var r;if(n==null)r=i*V,e.point(-F,r),e.point(0,r),e.point(F,r),e.point(F,0),e.point(F,-r),e.point(0,-r),e.point(-F,-r),e.point(-F,0),e.point(-F,r);else if(T(n[0]-t[0])>D){var a=n[0]<t[0]?F:-F;r=i*a/2,e.point(-a,r),e.point(0,r),e.point(a,r)}else e.point(t[0],t[1])}function Wt(n){var t=B(n),i=6*q,e=t>0,r=T(t)>D;function a(u,o,l,f){Dt(f,n,i,l,u,o)}function c(u,o){return B(u)*B(o)>t}function v(u){var o,l,f,p,w;return{lineStart:function(){p=f=!1,w=1},point:function(g,m){var E=[g,m],M,d=c(g,m),A=e?d?0:h(g,m):d?h(g+(g<0?F:-F),m):0;if(!o&&(p=f=d)&&u.lineStart(),d!==f&&(M=S(o,E),(!M||an(o,M)||an(E,M))&&(E[2]=1)),d!==f)w=0,d?(u.lineStart(),M=S(E,o),u.point(M[0],M[1])):(M=S(o,E),u.point(M[0],M[1],2),u.lineEnd()),o=M;else if(r&&o&&e^d){var R;!(A&l)&&(R=S(E,o,!0))&&(w=0,e?(u.lineStart(),u.point(R[0][0],R[0][1]),u.point(R[1][0],R[1][1]),u.lineEnd()):(u.point(R[1][0],R[1][1]),u.lineEnd(),u.lineStart(),u.point(R[0][0],R[0][1],3)))}d&&(!o||!an(o,E))&&u.point(E[0],E[1]),o=E,f=d,l=A},lineEnd:function(){f&&u.lineEnd(),o=null},clean:function(){return w|(p&&f)<<1}}}function S(u,o,l){var f=K(u),p=K(o),w=[1,0,0],g=sn(f,p),m=on(g,g),E=g[0],M=m-E*E;if(!M)return!l&&u;var d=t*m/M,A=-t*E/M,R=sn(w,g),I=un(w,d),_=un(g,A);gn(I,_);var P=R,C=on(I,P),y=on(P,P),W=C*C-y*(on(I,I)-1);if(!(W<0)){var z=hn(W),N=un(P,(-C-z)/y);if(gn(N,I),N=dn(N),!l)return N;var s=u[0],L=o[0],O=u[1],H=o[1],x;L<s&&(x=s,s=L,L=x);var k=L-s,U=T(k-F)<D,X=U||k<D;if(!U&&H<O&&(x=O,O=H,H=x),X?U?O+H>0^N[1]<(T(N[0]-s)<D?O:H):O<=N[1]&&N[1]<=H:k>F^(s<=N[0]&&N[0]<=L)){var Y=un(P,(-C+z)/y);return gn(Y,I),[N,dn(Y)]}}}function h(u,o){var l=e?n:F-n,f=0;return u<-l?f|=1:u>l&&(f|=2),o<-l?f|=4:o>l&&(f|=8),f}return kn(c,v,a,e?[0,-n]:[-F,n-F])}function Ht(n,t,i,e,r,a){var c=n[0],v=n[1],S=t[0],h=t[1],u=0,o=1,l=S-c,f=h-v,p;if(p=i-c,!(!l&&p>0)){if(p/=l,l<0){if(p<u)return;p<o&&(o=p)}else if(l>0){if(p>o)return;p>u&&(u=p)}if(p=r-c,!(!l&&p<0)){if(p/=l,l<0){if(p>o)return;p>u&&(u=p)}else if(l>0){if(p<u)return;p<o&&(o=p)}if(p=e-v,!(!f&&p>0)){if(p/=f,f<0){if(p<u)return;p<o&&(o=p)}else if(f>0){if(p>o)return;p>u&&(u=p)}if(p=a-v,!(!f&&p<0)){if(p/=f,f<0){if(p>o)return;p>u&&(u=p)}else if(f>0){if(p<u)return;p<o&&(o=p)}return u>0&&(n[0]=c+u*l,n[1]=v+u*f),o<1&&(t[0]=c+o*l,t[1]=v+o*f),!0}}}}}var b=1e9,fn=-b;function Vt(n,t,i,e){function r(h,u){return n<=h&&h<=i&&t<=u&&u<=e}function a(h,u,o,l){var f=0,p=0;if(h==null||(f=c(h,o))!==(p=c(u,o))||S(h,u)<0^o>0)do l.point(f===0||f===3?n:i,f>1?e:t);while((f=(f+o+4)%4)!==p);else l.point(u[0],u[1])}function c(h,u){return T(h[0]-n)<D?u>0?0:3:T(h[0]-i)<D?u>0?2:1:T(h[1]-t)<D?u>0?1:0:u>0?3:2}function v(h,u){return S(h.x,u.x)}function S(h,u){var o=c(h,1),l=c(u,1);return o!==l?o-l:o===0?u[1]-h[1]:o===1?h[0]-u[0]:o===2?h[1]-u[1]:u[0]-h[0]}return function(h){var u=h,o=Kn(),l,f,p,w,g,m,E,M,d,A,R,I={point:_,lineStart:W,lineEnd:z,polygonStart:C,polygonEnd:y};function _(s,L){r(s,L)&&u.point(s,L)}function P(){for(var s=0,L=0,O=f.length;L<O;++L)for(var H=f[L],x=1,k=H.length,U=H[0],X,Y,rn=U[0],Z=U[1];x<k;++x)X=rn,Y=Z,U=H[x],rn=U[0],Z=U[1],Y<=e?Z>e&&(rn-X)*(e-Y)>(Z-Y)*(n-X)&&++s:Z<=e&&(rn-X)*(e-Y)<(Z-Y)*(n-X)&&--s;return s}function C(){u=o,l=[],f=[],R=!0}function y(){var s=P(),L=R&&s,O=(l=Yn(l)).length;(L||O)&&(h.polygonStart(),L&&(h.lineStart(),a(null,null,1,h),h.lineEnd()),O&&Qn(l,v,s,a,h),h.polygonEnd()),u=h,l=f=p=null}function W(){I.point=N,f&&f.push(p=[]),A=!0,d=!1,E=M=NaN}function z(){l&&(N(w,g),m&&d&&o.rejoin(),l.push(o.result())),I.point=_,d&&u.lineEnd()}function N(s,L){var O=r(s,L);if(f&&p.push([s,L]),A)w=s,g=L,m=O,A=!1,O&&(u.lineStart(),u.point(s,L));else if(O&&d)u.point(s,L);else{var H=[E=Math.max(fn,Math.min(b,E)),M=Math.max(fn,Math.min(b,M))],x=[s=Math.max(fn,Math.min(b,s)),L=Math.max(fn,Math.min(b,L))];Ht(H,x,n,t,i,e)?(d||(u.lineStart(),u.point(H[0],H[1])),u.point(x[0],x[1]),O||u.lineEnd(),R=!1):O&&(u.lineStart(),u.point(s,L),R=!1)}E=s,M=L,d=O}return I}}const Hn=n=>n;var Q=1/0,pn=Q,en=-Q,vn=en,$t={point:xt,lineStart:j,lineEnd:j,polygonStart:j,polygonEnd:j,result:function(){var n=[[Q,pn],[en,vn]];return en=vn=-(pn=Q=1/0),n}};function xt(n,t){n<Q&&(Q=n),n>en&&(en=n),t<pn&&(pn=t),t>vn&&(vn=t)}const Vn=$t;function _n(n){return function(t){var i=new mn;for(var e in n)i[e]=n[e];return i.stream=t,i}}function mn(){}mn.prototype={constructor:mn,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Pn(n,t,i){var e=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),e!=null&&n.clipExtent(null),Ct(i,n.stream(Vn)),t(Vn.result()),e!=null&&n.clipExtent(e),n}function jn(n,t,i){return Pn(n,function(e){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],c=Math.min(r/(e[1][0]-e[0][0]),a/(e[1][1]-e[0][1])),v=+t[0][0]+(r-c*(e[1][0]+e[0][0]))/2,S=+t[0][1]+(a-c*(e[1][1]+e[0][1]))/2;n.scale(150*c).translate([v,S])},i)}function Jt(n,t,i){return jn(n,[[0,0],t],i)}function Ut(n,t,i){return Pn(n,function(e){var r=+t,a=r/(e[1][0]-e[0][0]),c=(r-a*(e[1][0]+e[0][0]))/2,v=-a*e[0][1];n.scale(150*a).translate([c,v])},i)}function Yt(n,t,i){return Pn(n,function(e){var r=+t,a=r/(e[1][1]-e[0][1]),c=-a*e[0][0],v=(r-a*(e[1][1]+e[0][1]))/2;n.scale(150*a).translate([c,v])},i)}var $n=16,Xt=B(30*q);function xn(n,t){return+t?Kt(n,t):Zt(n)}function Zt(n){return _n({point:function(t,i){t=n(t,i),this.stream.point(t[0],t[1])}})}function Kt(n,t){function i(e,r,a,c,v,S,h,u,o,l,f,p,w,g){var m=h-e,E=u-r,M=m*m+E*E;if(M>4*t&&w--){var d=c+l,A=v+f,R=S+p,I=hn(d*d+A*A+R*R),_=tn(R/=I),P=T(T(R)-1)<D||T(a-o)<D?(a+o)/2:nn(A,d),C=n(P,_),y=C[0],W=C[1],z=y-e,N=W-r,s=E*z-m*N;(s*s/M>t||T((m*z+E*N)/M-.5)>.3||c*l+v*f+S*p<Xt)&&(i(e,r,a,c,v,S,y,W,P,d/=I,A/=I,R,w,g),g.point(y,W),i(y,W,P,d,A,R,h,u,o,l,f,p,w,g))}}return function(e){var r,a,c,v,S,h,u,o,l,f,p,w,g={point:m,lineStart:E,lineEnd:d,polygonStart:function(){e.polygonStart(),g.lineStart=A},polygonEnd:function(){e.polygonEnd(),g.lineStart=E}};function m(_,P){_=n(_,P),e.point(_[0],_[1])}function E(){o=NaN,g.point=M,e.lineStart()}function M(_,P){var C=K([_,P]),y=n(_,P);i(o,l,u,f,p,w,o=y[0],l=y[1],u=_,f=C[0],p=C[1],w=C[2],$n,e),e.point(o,l)}function d(){g.point=m,e.lineEnd()}function A(){E(),g.point=R,g.lineEnd=I}function R(_,P){M(r=_,P),a=o,c=l,v=f,S=p,h=w,g.point=M}function I(){i(o,l,u,f,p,w,a,c,r,v,S,h,$n,e),g.lineEnd=d,d()}return g}}var Qt=_n({point:function(n,t){this.stream.point(n*q,t*q)}});function kt(n){return _n({point:function(t,i){var e=n(t,i);return this.stream.point(e[0],e[1])}})}function jt(n,t,i,e,r){function a(c,v){return c*=e,v*=r,[t+n*c,i-n*v]}return a.invert=function(c,v){return[(c-t)/n*e,(i-v)/n*r]},a}function Jn(n,t,i,e,r,a){if(!a)return jt(n,t,i,e,r);var c=B(a),v=G(a),S=c*n,h=v*n,u=c/n,o=v/n,l=(v*i-c*t)/n,f=(v*t+c*i)/n;function p(w,g){return w*=e,g*=r,[S*w-h*g+t,i-h*w-S*g]}return p.invert=function(w,g){return[e*(u*w-o*g+l),r*(f-o*w-u*g)]},p}function bt(n){return ne(function(){return n})()}function ne(n){var t,i=150,e=480,r=250,a=0,c=0,v=0,S=0,h=0,u,o=0,l=1,f=1,p=null,w=Wn,g=null,m,E,M,d=Hn,A=.5,R,I,_,P,C;function y(s){return _(s[0]*q,s[1]*q)}function W(s){return s=_.invert(s[0],s[1]),s&&[s[0]*$,s[1]*$]}y.stream=function(s){return P&&C===s?P:P=Qt(kt(u)(w(R(d(C=s)))))},y.preclip=function(s){return arguments.length?(w=s,p=void 0,N()):w},y.postclip=function(s){return arguments.length?(d=s,g=m=E=M=null,N()):d},y.clipAngle=function(s){return arguments.length?(w=+s?Wt(p=s*q):(p=null,Wn),N()):p*$},y.clipExtent=function(s){return arguments.length?(d=s==null?(g=m=E=M=null,Hn):Vt(g=+s[0][0],m=+s[0][1],E=+s[1][0],M=+s[1][1]),N()):g==null?null:[[g,m],[E,M]]},y.scale=function(s){return arguments.length?(i=+s,z()):i},y.translate=function(s){return arguments.length?(e=+s[0],r=+s[1],z()):[e,r]},y.center=function(s){return arguments.length?(a=s[0]%360*q,c=s[1]%360*q,z()):[a*$,c*$]},y.rotate=function(s){return arguments.length?(v=s[0]%360*q,S=s[1]%360*q,h=s.length>2?s[2]%360*q:0,z()):[v*$,S*$,h*$]},y.angle=function(s){return arguments.length?(o=s%360*q,z()):o*$},y.reflectX=function(s){return arguments.length?(l=s?-1:1,z()):l<0},y.reflectY=function(s){return arguments.length?(f=s?-1:1,z()):f<0},y.precision=function(s){return arguments.length?(R=xn(I,A=s*s),N()):hn(A)},y.fitExtent=function(s,L){return jn(y,s,L)},y.fitSize=function(s,L){return Jt(y,s,L)},y.fitWidth=function(s,L){return Ut(y,s,L)},y.fitHeight=function(s,L){return Yt(y,s,L)};function z(){var s=Jn(i,0,0,l,f,o).apply(null,t(a,c)),L=Jn(i,e-s[0],r-s[1],l,f,o);return u=Zn(v,S,h),I=yn(t,L),_=yn(u,I),R=xn(I,A),N()}function N(){return P=C=null,y}return function(){return t=n.apply(this,arguments),y.invert=t.invert&&W,z()}}function Rn(n,t){return[n,At(Lt((V+t)/2))]}Rn.invert=function(n,t){return[n,2*Xn(Rt(t))-V]};function te(){return ee(Rn).scale(961/J)}function ee(n){var t=bt(n),i=t.center,e=t.scale,r=t.translate,a=t.clipExtent,c=null,v,S,h;t.scale=function(o){return arguments.length?(e(o),u()):e()},t.translate=function(o){return arguments.length?(r(o),u()):r()},t.center=function(o){return arguments.length?(i(o),u()):i()},t.clipExtent=function(o){return arguments.length?(o==null?c=v=S=h=null:(c=+o[0][0],v=+o[0][1],S=+o[1][0],h=+o[1][1]),u()):c==null?null:[[c,v],[S,h]]};function u(){var o=F*e(),l=t(Nt(t.rotate()).invert([0,0]));return a(c==null?[[l[0]-o,l[1]-o],[l[0]+o,l[1]+o]]:n===Rn?[[Math.max(l[0]-o,c),v],[Math.min(l[0]+o,S),h]]:[[c,Math.max(l[1]-o,v)],[S,Math.min(l[1]+o,h)]])}return u()}const ie=""+new URL("china-32c74253.json",import.meta.url).href;const re=n=>(yt("data-v-71b82736"),n=n(),Mt(),n),oe=re(()=>Un("div",{class:"tip"},null,-1)),ue={__name:"MapScene",setup(n){let t=null;const i=Fn(null),e=Fn(null),r=()=>new bn,a=o=>{const l=new nt(45,o,1,1e3);return l.position.set(0,0,120),l.lookAt(0,0,0),l},c=(o,l,f)=>{const p=new tt({canvas:o,antialias:!0});return p.setSize(l,f),p.setPixelRatio(window.devicePixelRatio),p},v=(o,l)=>{const f=new vt(o,l);return f.minDistance=6,f.maxDistance=400,f},S=o=>{new et().load(ie,f=>{const p=JSON.parse(f);o&&o(p)})},h=(o,l)=>{const f=new An;return l.geometry.coordinates.forEach(w=>{w.forEach(g=>{const m=[],E=new ut;g.forEach((R,I)=>{if(Array.isArray(R)){const[_,P]=o(R);m.push(new In(_,-P,0)),I===0?E.moveTo(_,-P):E.lineTo(_,-P)}});const M={depth:3,bevelEnabled:!1},d=new lt(new ft(E,M),new at({color:"#7FFFD4",transparent:!0,opacity:.5})),A=new ct(new st().setFromPoints(m),new pt({color:"#fff"}));f.add(A),f.add(d)})}),f},u=(o,l,f)=>{const p=new it,w=new rt,g=m=>{w.x=m.clientX/window.innerWidth*2-1,w.y=-(m.clientY/window.innerHeight)*2+1,p.setFromCamera(w,o);const E=p.intersectObjects(l);E.length>0&&f&&f(E[0].object)};return document.addEventListener("pointermove",g),()=>{document.removeEventListener("pointermove",g)}};return St(()=>{const o=i.value,l=e.value,f=l.clientWidth,p=l.clientHeight,w=l.querySelector(".tip");let g=null;const m=r(),E=a(f/p),M=c(o,f,p),d=v(E,M.domElement);S(I=>{const _=new ot,P=te().center([104,37.5]).scale(60).translate([0,0]);I.features.forEach(C=>{const y=h(P,C),{name:W,center:z}=C.properties;if(W&&Array.isArray(z)){const[N,s]=P(z);y.userData={name:W,center:ht(E,new In(N,-s,0))}}_.add(y)}),m.add(_)});const A=u(E,m.children,I=>{if(!I||!I.isMesh)return;if(g){if(I.uuid===g.uuid)return;g.material.color=new Ln("#7FFFD4")}const _=I.parent;if(_&&Object.keys(_.userData).length>0){const{name:P,center:C}=_.userData;w.textContent=P,w.style.transform=`translate(${C.x}px, ${C.y}px)`}I.material.color=new Ln("#FF0000"),I.material.needsUpdate=!0,g=I}),R=()=>{d.update(),M.render(m,E),t=window.requestAnimationFrame(R)};R(),Et(()=>{A(),M.dispose(),M.forceContextLoss(),m.traverse(I=>{if(I instanceof An){const{geometry:_,material:P}=I;_&&_.dispose();const C=Array.isArray(P)?P:[P];for(const y of C)y&&y.dispose()}}),window.cancelAnimationFrame(t)})}),(o,l)=>(dt(),wt("div",{ref_key:"containerElementRef",ref:e,class:"container"},[oe,Un("canvas",{ref_key:"canvasElementRef",ref:i},null,512)],512))}},se=gt(ue,[["__scopeId","data-v-71b82736"]]);export{se as default};
