import{O as B,z as M,af as z,ad as x,h as A,M as I,ah as L,u as O,a_ as G}from"./three.module-8f39f104.js";import{O as T}from"./OrbitControls-8206acf3.js";import{_ as W,r as m,o as D,w as F,a as q,b as H,c as N,d as u,t as U,p as V,e as Z}from"./index-d7540ef8.js";const j=c=>(V("data-v-2b7fcd0f"),c=c(),Z(),c),J=j(()=>u("span",null,"方案切换：",-1)),K={__name:"PanoramaScene",setup(c){let p=null;const f=m(null),_=m(null),o=m(0),b=["/src/assets/textures/cube/px.png","/src/assets/textures/cube/nx.png","/src/assets/textures/cube/py.png","/src/assets/textures/cube/ny.png","/src/assets/textures/cube/pz.png","/src/assets/textures/cube/nz.png"],g=()=>{const t=new x,e=new A,n=b.map(r=>new I({map:e.load(r)})),s=new L(1,1,1),a=new O(s,n);return s.scale(1,1,-1),t.add(a),t},S=()=>{const t=new x,e=new G().load(b);return t.background=e,t},y=()=>{o.value=1-o.value},E=t=>{const e=new M(45,t,.1,1e3);return e.position.z=.1,e.lookAt(0,0,0),e},R=(t,e,n)=>{const s=new z({canvas:t,antialias:!0});return s.setSize(e,n),s.setPixelRatio(window.devicePixelRatio),s},C=(t,e)=>{const n=new T(t,e);return n.enablePan=!1,n.enableZoom=!1,n};return D(()=>{const t=f.value,e=_.value,n=e.clientWidth,s=e.clientHeight;let a=null;const r=E(n/s),l=R(t,n,s),k=C(r,l.domElement);F(o,i=>{a=i===1?S():g()},{immediate:!0});const w=()=>{k.update(),l.render(a,r),p=window.requestAnimationFrame(w)};w(),q(()=>{l.dispose(),l.forceContextLoss(),a.traverse(i=>{if(i instanceof B){const{geometry:h,material:d}=i;h&&h.dispose();const P=Array.isArray(d)?d:[d];for(const v of P)v&&v.dispose()}}),window.cancelAnimationFrame(p)})}),(t,e)=>(H(),N("div",{ref_key:"containerElementRef",ref:_,class:"container"},[u("div",{class:"button",onClick:y},[J,u("span",null,"当前方案"+U(o.value),1)]),u("canvas",{ref_key:"canvasElementRef",ref:f},null,512)],512))}},$=W(K,[["__scopeId","data-v-2b7fcd0f"]]);export{$ as default};
