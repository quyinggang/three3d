import{O as k,z,af as P,ad as x,h as U,M as B,ah as M,u as I,a_ as O}from"./three.module-8787a522.js";import{O as G}from"./OrbitControls-8109a5ff.js";import{_ as T,r as u,o as W,w as D,a as F,b as q,c as H,d as m,t as N,p as V,e as Z}from"./index-14fab622.js";const j=""+new URL("px-85d1704b.png",import.meta.url).href,J=""+new URL("nx-f5f16039.png",import.meta.url).href,K=""+new URL("py-c0778bb9.png",import.meta.url).href,Q=""+new URL("ny-2ce320fc.png",import.meta.url).href,X=""+new URL("pz-4c8a364f.png",import.meta.url).href,Y=""+new URL("nz-053c623f.png",import.meta.url).href;const $=o=>(V("data-v-a074103b"),o=o(),Z(),o),ee=$(()=>m("span",null,"方案切换：",-1)),ne={__name:"PanoramaScene",setup(o){let d=null;const f=u(null),_=u(null),r=u(0),w=[j,J,K,Q,X,Y],R=()=>{const n=new x,e=new U,t=w.map(c=>new B({map:e.load(c)})),a=new M(1,1,1),s=new I(a,t);return a.scale(1,1,-1),n.add(s),n},g=()=>{const n=new x,e=new O().load(w);return n.background=e,n},y=()=>{r.value=1-r.value},S=n=>{const e=new z(45,n,.1,1e3);return e.position.z=.1,e.lookAt(0,0,0),e},A=(n,e,t)=>{const a=new P({canvas:n,antialias:!0});return a.setSize(e,t),a.setPixelRatio(window.devicePixelRatio),a},L=(n,e)=>{const t=new G(n,e);return t.enablePan=!1,t.enableZoom=!1,t};return W(()=>{const n=f.value,e=_.value,t=e.clientWidth,a=e.clientHeight;let s=null;const c=S(t/a),l=A(n,t,a),E=L(c,l.domElement);D(r,i=>{s=i===1?g():R()},{immediate:!0});const h=()=>{E.update(),l.render(s,c),d=window.requestAnimationFrame(h)};h(),F(()=>{l.dispose(),l.forceContextLoss(),s.traverse(i=>{if(i instanceof k){const{geometry:v,material:p}=i;v&&v.dispose();const C=Array.isArray(p)?p:[p];for(const b of C)b&&b.dispose()}}),window.cancelAnimationFrame(d)})}),(n,e)=>(q(),H("div",{ref_key:"containerElementRef",ref:_,class:"container"},[m("div",{class:"button",onClick:y},[ee,m("span",null,"当前方案"+N(r.value),1)]),m("canvas",{ref_key:"canvasElementRef",ref:f},null,512)],512))}},oe=T(ne,[["__scopeId","data-v-a074103b"]]);export{oe as default};
