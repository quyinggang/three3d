import{O as B,y as g,ah as T,m as v,aw as k,ad as C,z as O,af as S}from"./three.module-b50c6fca.js";import{T as G,u as D}from"./tween.esm-4d835848.js";import{O as L}from"./OrbitControls-a97fbd6e.js";import{_ as M,r as x,o as U,a as W,b as X,c as Y,d as Z}from"./index-965901d4.js";const F={__name:"PointsTransform",setup(I){let u=null;const f=x(null),_=x(null),h=()=>{const n=new g(new T(4,4,4,8,8,8),new v({color:"#8A2BE2",size:.1})),e=new g(new k(2,31,15),new v({size:.1}));return[n,e]},P=()=>new C,b=n=>{const e=new O(45,n,1,1e3);return e.position.set(0,4,18),e.lookAt(0,0,0),e},E=(n,e,t)=>{const s=new S({canvas:n,antialias:!0});return s.setSize(e,t),s.setPixelRatio(window.devicePixelRatio),s},R=(n,e)=>{const t=new L(n,e);return t.minDistance=6,t.maxDistance=40,t},z=(n,e)=>{const t=n.geometry.attributes.position,s=e.geometry.attributes.position;for(let o=0,c=t.count;o<c;o++){const a={x:t.getX(o),y:t.getY(o),z:t.getZ(o)},m={x:s.getX(o),y:s.getY(o),z:s.getZ(o)},r=new G(a).to(m,1500);r.delay(1e3).yoyo(!0).repeat(1/0),r.onUpdate(({x:d,y:i,z:l})=>{t.setXYZ(o,d,i,l)}),r.start()}};return U(()=>{const n=f.value,e=_.value,t=e.clientWidth,s=e.clientHeight,o=P(),c=b(t/s),a=E(n,t,s),m=R(c,a.domElement),[r,d]=h();o.add(r);const i=()=>{m.update(),D(),r.geometry.attributes.position.needsUpdate=!0,a.render(o,c),u=window.requestAnimationFrame(i)};z(r,d),i(),W(()=>{a.dispose(),a.forceContextLoss(),o.traverse(l=>{if(l instanceof B){const{geometry:w,material:p}=l;w&&w.dispose();const A=Array.isArray(p)?p:[p];for(const y of A)y&&y.dispose()}}),window.cancelAnimationFrame(u)})}),(n,e)=>(X(),Y("div",{ref_key:"containerElementRef",ref:_,class:"container"},[Z("canvas",{ref_key:"canvasElementRef",ref:f},null,512)],512))}},j=M(F,[["__scopeId","data-v-76de7dad"]]);export{j as default};
