import{C as An,O as Cn,ad as bn,z as nt,af as tt,F as et,ai as it,V as rt,G as ot,g as In,aY as ut,u as lt,aZ as at,M as ft,w as ct,s as st,o as pt}from"./three.module-b50c6fca.js";import{O as vt}from"./OrbitControls-a97fbd6e.js";import{t as ht}from"./util-8759745b.js";import{_ as gt,r as Ln,o as St,a as Et,b as dt,c as wt,d as Un,p as yt,e as mt}from"./index-965901d4.js";class Mt{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const f=i[r],c=t+f,v=Math.abs(t)<Math.abs(f)?t-(c-f):f-(c-t);v&&(i[e++]=v),t=c}return i[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let i=this._n,e,r,f,c=0;if(i>0){for(c=t[--i];i>0&&(e=c,r=t[--i],c=e+r,f=r-(c-e),!f););i>0&&(f<0&&t[i-1]<0||f>0&&t[i-1]>0)&&(r=f*2,e=c+r,r==e-c&&(c=e))}return c}}function*_t(n){for(const t of n)yield*t}function Yn(n){return Array.from(_t(n))}var D=1e-6,Rt=1e-12,L=Math.PI,V=L/2,Fn=L/4,J=L*2,$=180/L,q=L/180,B=Math.abs,Xn=Math.atan,nn=Math.atan2,T=Math.cos,Pt=Math.exp,At=Math.log,G=Math.sin,Ct=Math.sign||function(n){return n>0?1:n<0?-1:0},hn=Math.sqrt,It=Math.tan;function Lt(n){return n>1?0:n<-1?L:Math.acos(n)}function tn(n){return n>1?V:n<-1?-V:Math.asin(n)}function j(){}function cn(n,t){n&&Dn.hasOwnProperty(n.type)&&Dn[n.type](n,t)}var Nn={Feature:function(n,t){cn(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,e=-1,r=i.length;++e<r;)cn(i[e].geometry,t)}},Dn={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)n=i[e],t.point(n[0],n[1],n[2])},LineString:function(n,t){En(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)En(i[e],t,0)},Polygon:function(n,t){zn(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)zn(i[e],t)},GeometryCollection:function(n,t){for(var i=n.geometries,e=-1,r=i.length;++e<r;)cn(i[e],t)}};function En(n,t,i){var e=-1,r=n.length-i,f;for(t.lineStart();++e<r;)f=n[e],t.point(f[0],f[1],f[2]);t.lineEnd()}function zn(n,t){var i=-1,e=n.length;for(t.polygonStart();++i<e;)En(n[i],t,1);t.polygonEnd()}function Ft(n,t){n&&Nn.hasOwnProperty(n.type)?Nn[n.type](n,t):cn(n,t)}function dn(n){return[nn(n[1],n[0]),tn(n[2])]}function K(n){var t=n[0],i=n[1],e=T(i);return[e*T(t),e*G(t),G(i)]}function on(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function sn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function gn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function un(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function wn(n){var t=hn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function yn(n,t){function i(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(i.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),i}function mn(n,t){return B(n)>L&&(n-=Math.round(n/J)*J),[n,t]}mn.invert=mn;function Zn(n,t,i){return(n%=J)?t||i?yn(Tn(n),Gn(t,i)):Tn(n):t||i?Gn(t,i):mn}function Bn(n){return function(t,i){return t+=n,B(t)>L&&(t-=Math.round(t/J)*J),[t,i]}}function Tn(n){var t=Bn(n);return t.invert=Bn(-n),t}function Gn(n,t){var i=T(n),e=G(n),r=T(t),f=G(t);function c(v,S){var h=T(S),u=T(v)*h,o=G(v)*h,l=G(S),a=l*i+u*e;return[nn(o*r-a*f,u*i-l*e),tn(a*r+o*f)]}return c.invert=function(v,S){var h=T(S),u=T(v)*h,o=G(v)*h,l=G(S),a=l*r-o*f;return[nn(o*r+l*f,u*i+a*e),tn(a*i-u*e)]},c}function Nt(n){n=Zn(n[0]*q,n[1]*q,n.length>2?n[2]*q:0);function t(i){return i=n(i[0]*q,i[1]*q),i[0]*=$,i[1]*=$,i}return t.invert=function(i){return i=n.invert(i[0]*q,i[1]*q),i[0]*=$,i[1]*=$,i},t}function Dt(n,t,i,e,r,f){if(i){var c=T(t),v=G(t),S=e*i;r==null?(r=t+e*J,f=t-S/2):(r=qn(c,r),f=qn(c,f),(e>0?r<f:r>f)&&(r+=e*J));for(var h,u=r;e>0?u>f:u<f;u-=S)h=dn([c,-v*T(u),-v*G(u)]),n.point(h[0],h[1])}}function qn(n,t){t=K(t),t[0]-=n,wn(t);var i=Lt(-t[1]);return((-t[2]<0?-i:i)+J-D)%J}function Kn(){var n=[],t;return{point:function(i,e,r){t.push([i,e,r])},lineStart:function(){n.push(t=[])},lineEnd:j,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var i=n;return n=[],t=null,i}}}function fn(n,t){return B(n[0]-t[0])<D&&B(n[1]-t[1])<D}function ln(n,t,i,e){this.x=n,this.z=t,this.o=i,this.e=e,this.v=!1,this.n=this.p=null}function Qn(n,t,i,e,r){var f=[],c=[],v,S;if(n.forEach(function(s){if(!((w=s.length-1)<=0)){var w,g=s[0],M=s[w],E;if(fn(g,M)){if(!g[2]&&!M[2]){for(r.lineStart(),v=0;v<w;++v)r.point((g=s[v])[0],g[1]);r.lineEnd();return}M[0]+=2*D}f.push(E=new ln(g,s,null,!0)),c.push(E.o=new ln(g,null,E,!1)),f.push(E=new ln(M,s,null,!1)),c.push(E.o=new ln(M,null,E,!0))}}),!!f.length){for(c.sort(t),On(f),On(c),v=0,S=c.length;v<S;++v)c[v].e=i=!i;for(var h=f[0],u,o;;){for(var l=h,a=!0;l.v;)if((l=l.n)===h)return;u=l.z,r.lineStart();do{if(l.v=l.o.v=!0,l.e){if(a)for(v=0,S=u.length;v<S;++v)r.point((o=u[v])[0],o[1]);else e(l.x,l.n.x,1,r);l=l.n}else{if(a)for(u=l.p.z,v=u.length-1;v>=0;--v)r.point((o=u[v])[0],o[1]);else e(l.x,l.p.x,-1,r);l=l.p}l=l.o,u=l.z,a=!a}while(!l.v);r.lineEnd()}}}function On(n){if(t=n.length){for(var t,i=0,e=n[0],r;++i<t;)e.n=r=n[i],r.p=e,e=r;e.n=r=n[0],r.p=e}}function Sn(n){return B(n[0])<=L?n[0]:Ct(n[0])*((B(n[0])+L)%J-L)}function zt(n,t){var i=Sn(t),e=t[1],r=G(e),f=[G(i),-T(i),0],c=0,v=0,S=new Mt;r===1?e=V+D:r===-1&&(e=-V-D);for(var h=0,u=n.length;h<u;++h)if(l=(o=n[h]).length)for(var o,l,a=o[l-1],s=Sn(a),w=a[1]/2+Fn,g=G(w),M=T(w),E=0;E<l;++E,s=d,g=A,M=C,a=y){var y=o[E],d=Sn(y),_=y[1]/2+Fn,A=G(_),C=T(_),R=d-s,P=R>=0?1:-1,F=P*R,m=F>L,W=g*A;if(S.add(nn(W*P*G(F),M*C+W*T(F))),c+=m?R+P*J:R,m^s>=i^d>=i){var z=sn(K(a),K(y));wn(z);var N=sn(f,z);wn(N);var p=(m^R>=0?-1:1)*tn(N[2]);(e>p||e===p&&(z[0]||z[1]))&&(v+=m^R>=0?1:-1)}}return(c<-D||c<D&&S<-Rt)^v&1}function kn(n,t,i,e){return function(r){var f=t(r),c=Kn(),v=t(c),S=!1,h,u,o,l={point:a,lineStart:w,lineEnd:g,polygonStart:function(){l.point=M,l.lineStart=E,l.lineEnd=y,u=[],h=[]},polygonEnd:function(){l.point=a,l.lineStart=w,l.lineEnd=g,u=Yn(u);var d=zt(h,e);u.length?(S||(r.polygonStart(),S=!0),Qn(u,Tt,d,i,r)):d&&(S||(r.polygonStart(),S=!0),r.lineStart(),i(null,null,1,r),r.lineEnd()),S&&(r.polygonEnd(),S=!1),u=h=null},sphere:function(){r.polygonStart(),r.lineStart(),i(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function a(d,_){n(d,_)&&r.point(d,_)}function s(d,_){f.point(d,_)}function w(){l.point=s,f.lineStart()}function g(){l.point=a,f.lineEnd()}function M(d,_){o.push([d,_]),v.point(d,_)}function E(){v.lineStart(),o=[]}function y(){M(o[0][0],o[0][1]),v.lineEnd();var d=v.clean(),_=c.result(),A,C=_.length,R,P,F;if(o.pop(),h.push(o),o=null,!!C){if(d&1){if(P=_[0],(R=P.length-1)>0){for(S||(r.polygonStart(),S=!0),r.lineStart(),A=0;A<R;++A)r.point((F=P[A])[0],F[1]);r.lineEnd()}return}C>1&&d&2&&_.push(_.pop().concat(_.shift())),u.push(_.filter(Bt))}}return l}}function Bt(n){return n.length>1}function Tt(n,t){return((n=n.x)[0]<0?n[1]-V-D:V-n[1])-((t=t.x)[0]<0?t[1]-V-D:V-t[1])}const Wn=kn(function(){return!0},Gt,Ot,[-L,-V]);function Gt(n){var t=NaN,i=NaN,e=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(f,c){var v=f>0?L:-L,S=B(f-t);B(S-L)<D?(n.point(t,i=(i+c)/2>0?V:-V),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(v,i),n.point(f,i),r=0):e!==v&&S>=L&&(B(t-e)<D&&(t-=e*D),B(f-v)<D&&(f-=v*D),i=qt(t,i,f,c),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(v,i),r=0),n.point(t=f,i=c),e=v},lineEnd:function(){n.lineEnd(),t=i=NaN},clean:function(){return 2-r}}}function qt(n,t,i,e){var r,f,c=G(n-i);return B(c)>D?Xn((G(t)*(f=T(e))*G(i)-G(e)*(r=T(t))*G(n))/(r*f*c)):(t+e)/2}function Ot(n,t,i,e){var r;if(n==null)r=i*V,e.point(-L,r),e.point(0,r),e.point(L,r),e.point(L,0),e.point(L,-r),e.point(0,-r),e.point(-L,-r),e.point(-L,0),e.point(-L,r);else if(B(n[0]-t[0])>D){var f=n[0]<t[0]?L:-L;r=i*f/2,e.point(-f,r),e.point(0,r),e.point(f,r)}else e.point(t[0],t[1])}function Wt(n){var t=T(n),i=6*q,e=t>0,r=B(t)>D;function f(u,o,l,a){Dt(a,n,i,l,u,o)}function c(u,o){return T(u)*T(o)>t}function v(u){var o,l,a,s,w;return{lineStart:function(){s=a=!1,w=1},point:function(g,M){var E=[g,M],y,d=c(g,M),_=e?d?0:h(g,M):d?h(g+(g<0?L:-L),M):0;if(!o&&(s=a=d)&&u.lineStart(),d!==a&&(y=S(o,E),(!y||fn(o,y)||fn(E,y))&&(E[2]=1)),d!==a)w=0,d?(u.lineStart(),y=S(E,o),u.point(y[0],y[1])):(y=S(o,E),u.point(y[0],y[1],2),u.lineEnd()),o=y;else if(r&&o&&e^d){var A;!(_&l)&&(A=S(E,o,!0))&&(w=0,e?(u.lineStart(),u.point(A[0][0],A[0][1]),u.point(A[1][0],A[1][1]),u.lineEnd()):(u.point(A[1][0],A[1][1]),u.lineEnd(),u.lineStart(),u.point(A[0][0],A[0][1],3)))}d&&(!o||!fn(o,E))&&u.point(E[0],E[1]),o=E,a=d,l=_},lineEnd:function(){a&&u.lineEnd(),o=null},clean:function(){return w|(s&&a)<<1}}}function S(u,o,l){var a=K(u),s=K(o),w=[1,0,0],g=sn(a,s),M=on(g,g),E=g[0],y=M-E*E;if(!y)return!l&&u;var d=t*M/y,_=-t*E/y,A=sn(w,g),C=un(w,d),R=un(g,_);gn(C,R);var P=A,F=on(C,P),m=on(P,P),W=F*F-m*(on(C,C)-1);if(!(W<0)){var z=hn(W),N=un(P,(-F-z)/m);if(gn(N,C),N=dn(N),!l)return N;var p=u[0],I=o[0],O=u[1],H=o[1],x;I<p&&(x=p,p=I,I=x);var k=I-p,U=B(k-L)<D,X=U||k<D;if(!U&&H<O&&(x=O,O=H,H=x),X?U?O+H>0^N[1]<(B(N[0]-p)<D?O:H):O<=N[1]&&N[1]<=H:k>L^(p<=N[0]&&N[0]<=I)){var Y=un(P,(-F+z)/m);return gn(Y,C),[N,dn(Y)]}}}function h(u,o){var l=e?n:L-n,a=0;return u<-l?a|=1:u>l&&(a|=2),o<-l?a|=4:o>l&&(a|=8),a}return kn(c,v,f,e?[0,-n]:[-L,n-L])}function Ht(n,t,i,e,r,f){var c=n[0],v=n[1],S=t[0],h=t[1],u=0,o=1,l=S-c,a=h-v,s;if(s=i-c,!(!l&&s>0)){if(s/=l,l<0){if(s<u)return;s<o&&(o=s)}else if(l>0){if(s>o)return;s>u&&(u=s)}if(s=r-c,!(!l&&s<0)){if(s/=l,l<0){if(s>o)return;s>u&&(u=s)}else if(l>0){if(s<u)return;s<o&&(o=s)}if(s=e-v,!(!a&&s>0)){if(s/=a,a<0){if(s<u)return;s<o&&(o=s)}else if(a>0){if(s>o)return;s>u&&(u=s)}if(s=f-v,!(!a&&s<0)){if(s/=a,a<0){if(s>o)return;s>u&&(u=s)}else if(a>0){if(s<u)return;s<o&&(o=s)}return u>0&&(n[0]=c+u*l,n[1]=v+u*a),o<1&&(t[0]=c+o*l,t[1]=v+o*a),!0}}}}}var b=1e9,an=-b;function Vt(n,t,i,e){function r(h,u){return n<=h&&h<=i&&t<=u&&u<=e}function f(h,u,o,l){var a=0,s=0;if(h==null||(a=c(h,o))!==(s=c(u,o))||S(h,u)<0^o>0)do l.point(a===0||a===3?n:i,a>1?e:t);while((a=(a+o+4)%4)!==s);else l.point(u[0],u[1])}function c(h,u){return B(h[0]-n)<D?u>0?0:3:B(h[0]-i)<D?u>0?2:1:B(h[1]-t)<D?u>0?1:0:u>0?3:2}function v(h,u){return S(h.x,u.x)}function S(h,u){var o=c(h,1),l=c(u,1);return o!==l?o-l:o===0?u[1]-h[1]:o===1?h[0]-u[0]:o===2?h[1]-u[1]:u[0]-h[0]}return function(h){var u=h,o=Kn(),l,a,s,w,g,M,E,y,d,_,A,C={point:R,lineStart:W,lineEnd:z,polygonStart:F,polygonEnd:m};function R(p,I){r(p,I)&&u.point(p,I)}function P(){for(var p=0,I=0,O=a.length;I<O;++I)for(var H=a[I],x=1,k=H.length,U=H[0],X,Y,rn=U[0],Z=U[1];x<k;++x)X=rn,Y=Z,U=H[x],rn=U[0],Z=U[1],Y<=e?Z>e&&(rn-X)*(e-Y)>(Z-Y)*(n-X)&&++p:Z<=e&&(rn-X)*(e-Y)<(Z-Y)*(n-X)&&--p;return p}function F(){u=o,l=[],a=[],A=!0}function m(){var p=P(),I=A&&p,O=(l=Yn(l)).length;(I||O)&&(h.polygonStart(),I&&(h.lineStart(),f(null,null,1,h),h.lineEnd()),O&&Qn(l,v,p,f,h),h.polygonEnd()),u=h,l=a=s=null}function W(){C.point=N,a&&a.push(s=[]),_=!0,d=!1,E=y=NaN}function z(){l&&(N(w,g),M&&d&&o.rejoin(),l.push(o.result())),C.point=R,d&&u.lineEnd()}function N(p,I){var O=r(p,I);if(a&&s.push([p,I]),_)w=p,g=I,M=O,_=!1,O&&(u.lineStart(),u.point(p,I));else if(O&&d)u.point(p,I);else{var H=[E=Math.max(an,Math.min(b,E)),y=Math.max(an,Math.min(b,y))],x=[p=Math.max(an,Math.min(b,p)),I=Math.max(an,Math.min(b,I))];Ht(H,x,n,t,i,e)?(d||(u.lineStart(),u.point(H[0],H[1])),u.point(x[0],x[1]),O||u.lineEnd(),A=!1):O&&(u.lineStart(),u.point(p,I),A=!1)}E=p,y=I,d=O}return C}}const Hn=n=>n;var Q=1/0,pn=Q,en=-Q,vn=en,$t={point:xt,lineStart:j,lineEnd:j,polygonStart:j,polygonEnd:j,result:function(){var n=[[Q,pn],[en,vn]];return en=vn=-(pn=Q=1/0),n}};function xt(n,t){n<Q&&(Q=n),n>en&&(en=n),t<pn&&(pn=t),t>vn&&(vn=t)}const Vn=$t;function _n(n){return function(t){var i=new Mn;for(var e in n)i[e]=n[e];return i.stream=t,i}}function Mn(){}Mn.prototype={constructor:Mn,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Rn(n,t,i){var e=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),e!=null&&n.clipExtent(null),Ft(i,n.stream(Vn)),t(Vn.result()),e!=null&&n.clipExtent(e),n}function jn(n,t,i){return Rn(n,function(e){var r=t[1][0]-t[0][0],f=t[1][1]-t[0][1],c=Math.min(r/(e[1][0]-e[0][0]),f/(e[1][1]-e[0][1])),v=+t[0][0]+(r-c*(e[1][0]+e[0][0]))/2,S=+t[0][1]+(f-c*(e[1][1]+e[0][1]))/2;n.scale(150*c).translate([v,S])},i)}function Jt(n,t,i){return jn(n,[[0,0],t],i)}function Ut(n,t,i){return Rn(n,function(e){var r=+t,f=r/(e[1][0]-e[0][0]),c=(r-f*(e[1][0]+e[0][0]))/2,v=-f*e[0][1];n.scale(150*f).translate([c,v])},i)}function Yt(n,t,i){return Rn(n,function(e){var r=+t,f=r/(e[1][1]-e[0][1]),c=-f*e[0][0],v=(r-f*(e[1][1]+e[0][1]))/2;n.scale(150*f).translate([c,v])},i)}var $n=16,Xt=T(30*q);function xn(n,t){return+t?Kt(n,t):Zt(n)}function Zt(n){return _n({point:function(t,i){t=n(t,i),this.stream.point(t[0],t[1])}})}function Kt(n,t){function i(e,r,f,c,v,S,h,u,o,l,a,s,w,g){var M=h-e,E=u-r,y=M*M+E*E;if(y>4*t&&w--){var d=c+l,_=v+a,A=S+s,C=hn(d*d+_*_+A*A),R=tn(A/=C),P=B(B(A)-1)<D||B(f-o)<D?(f+o)/2:nn(_,d),F=n(P,R),m=F[0],W=F[1],z=m-e,N=W-r,p=E*z-M*N;(p*p/y>t||B((M*z+E*N)/y-.5)>.3||c*l+v*a+S*s<Xt)&&(i(e,r,f,c,v,S,m,W,P,d/=C,_/=C,A,w,g),g.point(m,W),i(m,W,P,d,_,A,h,u,o,l,a,s,w,g))}}return function(e){var r,f,c,v,S,h,u,o,l,a,s,w,g={point:M,lineStart:E,lineEnd:d,polygonStart:function(){e.polygonStart(),g.lineStart=_},polygonEnd:function(){e.polygonEnd(),g.lineStart=E}};function M(R,P){R=n(R,P),e.point(R[0],R[1])}function E(){o=NaN,g.point=y,e.lineStart()}function y(R,P){var F=K([R,P]),m=n(R,P);i(o,l,u,a,s,w,o=m[0],l=m[1],u=R,a=F[0],s=F[1],w=F[2],$n,e),e.point(o,l)}function d(){g.point=M,e.lineEnd()}function _(){E(),g.point=A,g.lineEnd=C}function A(R,P){y(r=R,P),f=o,c=l,v=a,S=s,h=w,g.point=y}function C(){i(o,l,u,a,s,w,f,c,r,v,S,h,$n,e),g.lineEnd=d,d()}return g}}var Qt=_n({point:function(n,t){this.stream.point(n*q,t*q)}});function kt(n){return _n({point:function(t,i){var e=n(t,i);return this.stream.point(e[0],e[1])}})}function jt(n,t,i,e,r){function f(c,v){return c*=e,v*=r,[t+n*c,i-n*v]}return f.invert=function(c,v){return[(c-t)/n*e,(i-v)/n*r]},f}function Jn(n,t,i,e,r,f){if(!f)return jt(n,t,i,e,r);var c=T(f),v=G(f),S=c*n,h=v*n,u=c/n,o=v/n,l=(v*i-c*t)/n,a=(v*t+c*i)/n;function s(w,g){return w*=e,g*=r,[S*w-h*g+t,i-h*w-S*g]}return s.invert=function(w,g){return[e*(u*w-o*g+l),r*(a-o*w-u*g)]},s}function bt(n){return ne(function(){return n})()}function ne(n){var t,i=150,e=480,r=250,f=0,c=0,v=0,S=0,h=0,u,o=0,l=1,a=1,s=null,w=Wn,g=null,M,E,y,d=Hn,_=.5,A,C,R,P,F;function m(p){return R(p[0]*q,p[1]*q)}function W(p){return p=R.invert(p[0],p[1]),p&&[p[0]*$,p[1]*$]}m.stream=function(p){return P&&F===p?P:P=Qt(kt(u)(w(A(d(F=p)))))},m.preclip=function(p){return arguments.length?(w=p,s=void 0,N()):w},m.postclip=function(p){return arguments.length?(d=p,g=M=E=y=null,N()):d},m.clipAngle=function(p){return arguments.length?(w=+p?Wt(s=p*q):(s=null,Wn),N()):s*$},m.clipExtent=function(p){return arguments.length?(d=p==null?(g=M=E=y=null,Hn):Vt(g=+p[0][0],M=+p[0][1],E=+p[1][0],y=+p[1][1]),N()):g==null?null:[[g,M],[E,y]]},m.scale=function(p){return arguments.length?(i=+p,z()):i},m.translate=function(p){return arguments.length?(e=+p[0],r=+p[1],z()):[e,r]},m.center=function(p){return arguments.length?(f=p[0]%360*q,c=p[1]%360*q,z()):[f*$,c*$]},m.rotate=function(p){return arguments.length?(v=p[0]%360*q,S=p[1]%360*q,h=p.length>2?p[2]%360*q:0,z()):[v*$,S*$,h*$]},m.angle=function(p){return arguments.length?(o=p%360*q,z()):o*$},m.reflectX=function(p){return arguments.length?(l=p?-1:1,z()):l<0},m.reflectY=function(p){return arguments.length?(a=p?-1:1,z()):a<0},m.precision=function(p){return arguments.length?(A=xn(C,_=p*p),N()):hn(_)},m.fitExtent=function(p,I){return jn(m,p,I)},m.fitSize=function(p,I){return Jt(m,p,I)},m.fitWidth=function(p,I){return Ut(m,p,I)},m.fitHeight=function(p,I){return Yt(m,p,I)};function z(){var p=Jn(i,0,0,l,a,o).apply(null,t(f,c)),I=Jn(i,e-p[0],r-p[1],l,a,o);return u=Zn(v,S,h),C=yn(t,I),R=yn(u,C),A=xn(C,_),N()}function N(){return P=F=null,m}return function(){return t=n.apply(this,arguments),m.invert=t.invert&&W,z()}}function Pn(n,t){return[n,At(It((V+t)/2))]}Pn.invert=function(n,t){return[n,2*Xn(Pt(t))-V]};function te(){return ee(Pn).scale(961/J)}function ee(n){var t=bt(n),i=t.center,e=t.scale,r=t.translate,f=t.clipExtent,c=null,v,S,h;t.scale=function(o){return arguments.length?(e(o),u()):e()},t.translate=function(o){return arguments.length?(r(o),u()):r()},t.center=function(o){return arguments.length?(i(o),u()):i()},t.clipExtent=function(o){return arguments.length?(o==null?c=v=S=h=null:(c=+o[0][0],v=+o[0][1],S=+o[1][0],h=+o[1][1]),u()):c==null?null:[[c,v],[S,h]]};function u(){var o=L*e(),l=t(Nt(t.rotate()).invert([0,0]));return f(c==null?[[l[0]-o,l[1]-o],[l[0]+o,l[1]+o]]:n===Pn?[[Math.max(l[0]-o,c),v],[Math.min(l[0]+o,S),h]]:[[c,Math.max(l[1]-o,v)],[S,Math.min(l[1]+o,h)]])}return u()}const ie=""+new URL("china-32c74253.json",import.meta.url).href;const re=n=>(yt("data-v-46787d40"),n=n(),mt(),n),oe=re(()=>Un("div",{class:"tip"},null,-1)),ue={__name:"MapScene",setup(n){let t=null;const i=Ln(null),e=Ln(null),r=()=>new bn,f=o=>{const l=new nt(45,o,1,1e3);return l.position.set(0,0,120),l.lookAt(0,0,0),l},c=(o,l,a)=>{const s=new tt({canvas:o,antialias:!0});return s.setSize(l,a),s.setPixelRatio(window.devicePixelRatio),s},v=(o,l)=>{const a=new vt(o,l);return a.minDistance=6,a.maxDistance=400,a},S=o=>{new et().load(ie,a=>{const s=JSON.parse(a);o&&o(s)})},h=(o,l)=>{const a=new Cn;return l.geometry.coordinates.forEach(w=>{w.forEach(g=>{const M=[],E=new ut;g.forEach((A,C)=>{if(Array.isArray(A)){const[R,P]=o(A);M.push(new In(R,-P,0)),C===0?E.moveTo(R,-P):E.lineTo(R,-P)}});const y={depth:3,bevelEnabled:!1},d=new lt(new at(E,y),new ft({color:"#7FFFD4",transparent:!0,opacity:.5})),_=new ct(new st().setFromPoints(M),new pt({color:"#fff"}));a.add(_),a.add(d)})}),a},u=o=>{const{camera:l,objects:a,callback:s,containerElement:w}=o,g=w.getBoundingClientRect(),M=new it,E=new rt,y=d=>{E.x=(d.clientX-g.left)/g.width*2-1,E.y=-((d.clientY-g.top)/g.height)*2+1,M.setFromCamera(E,l);const _=M.intersectObjects(a);_.length>0&&s&&s(_[0].object)};return w.addEventListener("pointermove",y),()=>{w.removeEventListener("pointermove",y)}};return St(()=>{const o=i.value,l=e.value,a=l.clientWidth,s=l.clientHeight,w=l.querySelector(".tip");let g=null;const M=r(),E=f(a/s),y=c(o,a,s),d=v(E,y.domElement);S(C=>{const R=new ot,P=te().center([104,37.5]).scale(60).translate([0,0]);C.features.forEach(F=>{const m=h(P,F),{name:W,center:z}=F.properties;if(W&&Array.isArray(z)){const[N,p]=P(z);m.userData={name:W,center:ht(E,new In(N,-p,0),{width:a,height:s})}}R.add(m)}),M.add(R)});const _=u({camera:E,objects:M.children,containerElement:l,callback:C=>{if(!C||!C.isMesh)return;if(g){if(C.uuid===g.uuid)return;g.material.color=new An("#7FFFD4")}const R=C.parent;if(R&&Object.keys(R.userData).length>0){const{name:P,center:F}=R.userData;w.textContent=P,w.style.transform=`translate(${F.x}px, ${F.y}px)`}C.material.color=new An("#FF0000"),C.material.needsUpdate=!0,g=C}}),A=()=>{d.update(),y.render(M,E),t=window.requestAnimationFrame(A)};A(),Et(()=>{_(),y.dispose(),y.forceContextLoss(),M.traverse(C=>{if(C instanceof Cn){const{geometry:R,material:P}=C;R&&R.dispose();const F=Array.isArray(P)?P:[P];for(const m of F)m&&m.dispose()}}),window.cancelAnimationFrame(t)})}),(o,l)=>(dt(),wt("div",{ref_key:"containerElementRef",ref:e,class:"container"},[oe,Un("canvas",{ref_key:"canvasElementRef",ref:i},null,512)],512))}},se=gt(ue,[["__scopeId","data-v-46787d40"]]);export{se as default};
